<html ng-app="myapp">

<head>
    <meta charset="UTF-8">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="index.css" rel="stylesheet">
    <script src="javascripts/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="javascripts/jquery-ui.min.js"></script>
    <script type="text/javascript" src="javascripts/underscore-min.js"></script>
    <script src="javascripts/angular.min.js"></script>
    <script src="javascripts/angular-ui.min.js"></script>
    <script src="javascripts/ui-bootstrap-tpls-0.11.0.min.js"></script>
    <script src="javascripts/sortable.js"></script>
    <title>TaskQuest</title>
</head>

<body ng-controller="controller">
<div class="headerBar">
    <select class="board" style="font-size: 1.5rem; width: 200px" ng-model="selectedBoard" ng-options="board.name for board in boardList">
    </select>
    <button ng-click="newBoard()">New Board</button>

    <span ng-repeat="user in userList">
    <span class="user">{{user.user}}</span>
        <span ng-repeat="task in user.task">
            <img ng-src="images/{{task.icon}}.png" popover-trigger="mouseenter" popover-placement="bottom" popover="{{task.name}}" >
        </span>
    </span>
</div>
    <div class="container">
        <div class="row">
            <div class="col-xs-4" ng-repeat="lines in linesAry">
                <section ng-repeat="line in lines" class="line">
                    <header>{{line.title}}</header>
                    <div class="cardlist">
                        <form name="addCardForm" ng-submit="addCard(line, addObj)">
                            <input ng-model="addObj.name" placeholder="Add Todo" />
                        </form>
                        <article class="blank"></article>

                        <div ui-sortable="sortableOptions" class="apps-container" style="min-height: 200px" data-status="{{line.status}}">
                            <div ng-repeat="card in line.cards" data-id="{{card._id}}">
                                <article class="card" ng-click="openCard(card)">
                                    <img ng-src="images/{{card.icon}}.png"> <span class="tag" ng-repeat="tag in card.name | findTag">{{tag}}</span>  {{card.name | removeTag}} <span class="user" ng-class="{userme: isUserMe(card.user)}">{{card.user}}</span>
                                </article>
                            </div>
                        </div>
                    </div>
                    <article>
                    </article>
                </section>
            </div>
        </div>

    </div>
    <script src="index.js">
    </script>
    <script type="text/ng-template" id="myModalContent.html">
        <div class="modal-header">
            <h3 class="modal-title">Edit</h3>
        </div>
        <div class="modal-body">
            Title: <BR>
            <input class="form-control" ng-model="card.name"><BR>
            User: <BR>
            <input class="form-control" ng-model="card.user"><BR>
            Memo: <BR>
            <textarea class="form-control" ng-model="card.memo"></textarea>
            Icon: <BR>
            <select ng-model="card.icon" name="" id="">
                <option value="slime">ちょろい</option>
                <option value="bomb">不安</option>
                <option value="boss">てごわい</option>
            </select><BR>
            Status: <BR>
            <select ng-model="card.status" ng-options="status.status as status.title for status in statusMap">
            </select>
        </div>
        <div class="modal-footer">
            <button class="btn btn-danger" ng-click="delete()">Delete</button>
            <button class="btn btn-primary" ng-click="ok()">OK</button>
            <button class="btn btn-default" ng-click="cancel()">Cancel</button>
        </div>
    </script>    
</body>

</html>
